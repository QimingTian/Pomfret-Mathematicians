# 建模框架：数据、假设与变量定义

## 一、需要收集的数据（Data Collection）

### 1.1 建筑物几何数据

#### 必需数据（Critical）
- [ ] **房间数量**：每层有多少个房间
- [ ] **房间尺寸**：长 × 宽 × 高（米）
  - 小型办公室：4m × 3m
  - 大型会议室：10m × 8m
  - 仓库：20m × 15m
- [ ] **走廊长度和宽度**
  - 主走廊：长度、宽度（影响移动速度）
  - 连接通道
- [ ] **楼层高度**：用于计算爬楼时间
- [ ] **楼梯位置和数量**：每个楼梯的位置坐标
- [ ] **出口位置**：每个出口的位置和宽度
- [ ] **房间连接关系**：哪些房间通过走廊连接

#### 可选数据（Optional）
- [ ] **门的宽度**：影响通过速度
- [ ] **障碍物位置**：家具、设备等
- [ ] **视线范围**：能否从门口看到整个房间

**数据来源建议**：
- 建筑平面图（CAD文件或手绘）
- 现场测量
- Google Maps室内地图
- 建筑规范标准值

---

### 1.2 响应者数据

#### 人员能力数据
- [ ] **移动速度**（米/秒）
  - 正常行走：1.2-1.5 m/s
  - 快速移动：2.0-2.5 m/s
  - 烟雾中移动：0.5-1.0 m/s
  - 爬楼速度：0.3-0.5 m/s（上楼），0.6-0.8 m/s（下楼）
- [ ] **房间检查时间**（秒/平方米）
  - 快速扫视：0.5-1 秒/m²
  - 仔细检查：2-3 秒/m²
  - 复杂环境（有障碍物）：3-5 秒/m²
- [ ] **通信延迟**：对讲机响应时间（1-3秒）
- [ ] **体能限制**：持续工作时间（10-30分钟）

#### 可用资源
- [ ] **响应者数量**：可调配的人数
- [ ] **装备类型**：
  - 基础装备（手电筒、对讲机）
  - 专业装备（热成像仪、氧气瓶）
- [ ] **专业技能**：医疗、破拆、搜救等

**数据来源建议**：
- 消防训练手册
- 实际演练数据
- 文献中的标准值

---

### 1.3 居住者数据

#### 房间使用数据
- [ ] **房间类型和功能**：
  - 办公室、会议室、休息室
  - 儿童日托、教室
  - 实验室、仓库、机房
- [ ] **典型占用人数**：
  - 办公室：2-6人
  - 会议室：10-20人
  - 日托中心：15-30人（含儿童）
- [ ] **时间占用模式**：
  - 工作时间（9:00-17:00）：高占用率
  - 非工作时间：低占用率
- [ ] **人员移动能力**：
  - 成年人疏散速度：1.0-1.5 m/s
  - 儿童/老人：0.5-0.8 m/s
  - 行动不便者：0.2-0.5 m/s

#### 行为数据
- [ ] **响应时间**：听到警报后开始疏散的时间（30-180秒）
- [ ] **熟悉度**：对建筑的了解程度（影响迷路概率）
- [ ] **恐慌系数**：紧急情况下的非理性行为

**数据来源建议**：
- 建筑使用记录
- 人力资源部门数据
- 疏散演练统计
- 研究文献（SFPE Handbook）

---

### 1.4 紧急情况数据

#### 火灾数据
- [ ] **火势蔓延速度**：
  - 闷烧期：缓慢
  - 快速发展期：1-2个房间/分钟
  - 全面发展期：极快
- [ ] **烟雾扩散速度**：3-5 m/s（垂直），0.5-1 m/s（水平）
- [ ] **温度上升率**：10-20°C/分钟
- [ ] **能见度下降**：指数衰减模型

#### 其他紧急情况
- [ ] **煤气泄漏**：扩散模式
- [ ] **建筑倒塌风险**：地震后的安全评估时间

**数据来源建议**：
- 火灾动力学模拟软件（FDS）
- 历史事故报告
- NFPA（美国消防协会）标准

---

### 1.5 传感器/技术数据（如果考虑）

- [ ] **传感器类型和位置**：
  - 烟雾探测器
  - 占用传感器
  - 摄像头覆盖范围
- [ ] **数据更新频率**：实时 vs 延迟
- [ ] **准确率**：误报率、漏报率
- [ ] **通信带宽**：数据传输速度

---

## 二、建模假设（Assumptions）

### 2.1 基础假设（适用于所有模型）

#### A. 建筑物假设
1. **静态结构假设**
   - 建筑结构在疏散期间保持完整
   - 门和通道保持可用（无倒塌或阻塞）
   - 理由：简化模型，适用于大多数紧急情况

2. **完全连通假设**
   - 所有房间都可以通过走廊到达
   - 不存在完全孤立的区域
   - 理由：现实建筑设计要求

3. **确定性几何**
   - 距离和面积测量准确
   - 不考虑测量误差
   - 理由：简化计算

#### B. 响应者假设
4. **同质化假设**（初级模型）
   - 所有响应者速度和能力相同
   - 后续可扩展为异质化
   - 理由：简化初始模型

5. **理性决策假设**
   - 响应者按照最优策略行动
   - 不会迷路或做出错误判断
   - 理由：训练有素的专业人员

6. **无疲劳假设**（短时间内）
   - 移动速度在整个过程中保持恒定
   - 适用于<30分钟的操作
   - 理由：短时间内影响有限

7. **完美通信假设**（基础模型）
   - 响应者之间可以实时通信
   - 无延迟或失败
   - 理由：理想情况，后续可放松

#### C. 居住者假设
8. **理性疏散假设**
   - 居住者听到警报后立即开始疏散
   - 朝最近出口移动
   - 理由：简化人群行为模型

9. **完全疏散假设**（扩展模型放松）
   - 响应者到达时，移动能力正常的人已疏散
   - 只需检查是否有滞留者
   - 理由：符合实际情况

#### D. 检查过程假设
10. **二元状态假设**
    - 房间只有"已清理"和"未清理"两种状态
    - 一旦检查完成，状态不会改变
    - 理由：简化模型

11. **视线检查假设**
    - 响应者进入房间后可以完全观察
    - 检查时间与面积成正比
    - 理由：简化检查过程

12. **单次检查假设**（无冗余版本）
    - 每个房间只需检查一次
    - 后续可添加冗余策略
    - 理由：最小化时间的基础模型

#### E. 紧急情况假设
13. **已知起火点假设**（火灾情况）
    - 火灾位置在警报触发时已知
    - 理由：现代建筑有火灾定位系统

14. **可预测扩散假设**
    - 危险扩散遵循确定性模型
    - 理由：基于物理模型

### 2.2 基础场景特定假设

15. **单层简化假设**
    - 所有房间在同一平面
    - 无垂直移动
    - 理由：题目要求

16. **对称布局假设**
    - 房间大小相同
    - 均匀分布在走廊两侧
    - 理由：题目描述

17. **同时开始假设**
    - 两名消防员同时开始扫描
    - 从各自的初始位置出发
    - 理由：最优策略

18. **无烟雾假设**（初始模型）
    - 能见度不受影响
    - 移动速度恒定
    - 理由：简化基础模型

### 2.3 扩展模型假设（可选择性放松）

19. **部分通信失败假设**
    - 某些区域通信中断
    - 响应者需要独立决策

20. **异质响应者假设**
    - 不同响应者有不同能力
    - 需要匹配任务难度

21. **时变危险假设**
    - 危险区域随时间变化
    - 需要动态重新规划

22. **部分信息假设**
    - 不完全了解建筑布局
    - 需要探索和学习

---

## 三、变量定义（Variables）

### 3.1 常量（Constants） - 模型输入

#### 建筑参数
| 符号 | 含义 | 单位 | 典型值 |
|------|------|------|--------|
| N_r | 房间总数 | - | 6, 20, 50 |
| N_f | 楼层数 | - | 1, 3, 10 |
| L_h | 走廊长度 | m | 20-100 |
| W_h | 走廊宽度 | m | 1.5-3 |
| A_i | 房间i的面积 | m² | 10-200 |
| H_f | 楼层高度 | m | 3-4 |
| N_e | 出口数量 | - | 2-6 |

#### 响应者参数
| 符号 | 含义 | 单位 | 典型值 |
|------|------|------|--------|
| N_resp | 响应者数量 | - | 2-10 |
| v_walk | 行走速度（全副装备） | m/s | 1.79 |
| v_stair_up | 上楼速度 | m/s | 0.4 |
| v_stair_down | 下楼速度 | m/s | 0.7 |
| α | 检查时间系数（基础） | s/m² | 1.0 |
| β | 检查时间系数（复杂度） | s | 5-30 |
| t_comm | 通信时间 | s | 2-5 |

#### 居住者参数
| 符号 | 含义 | 单位 | 典型值 |
|------|------|------|--------|
| O_i | 房间i的占用人数 | - | 0-50 |
| Type_i | 房间i的类型 | category | office/daycare/lab |
| v_evac | 疏散速度 | m/s | 1.0 |
| t_response | 响应延迟 | s | 60-180 |

#### 危险参数
| 符号 | 含义 | 单位 | 典型值 |
|------|------|------|--------|
| r_fire | 火势蔓延速度 | 房间/min | 0.5-2 |
| H_0 | 初始危险值 | - | 0-100 |
| k_spread | 扩散系数 | 1/min | 0.1-0.5 |
| T_critical | 临界时间（不可进入） | min | 5-10 |

---

### 3.2 决策变量（Decision Variables） - 优化目标

#### 路径变量
| 符号 | 含义 | 类型 | 说明 |
|------|------|------|------|
| Path_j | 响应者j的访问序列 | 序列 | [r3, r1, r5, r2] |
| x_ijk | 响应者j在时间k是否在房间i | 二元 | 0或1 |
| y_ij | 房间i是否由响应者j检查 | 二元 | 0或1 |
| S_j | 响应者j的起始位置 | 坐标 | (x, y, floor) |

#### 时间变量（由决策变量决定）
| 符号 | 含义 | 单位 | 说明 |
|------|------|------|------|
| T_j | 响应者j的总时间 | s | 完成分配任务的时间 |
| T_total | 系统总时间 | s | max(T_1, ..., T_N) |
| t_arrive(i,j) | 响应者j到达房间i的时间 | s | - |
| t_clear(i) | 房间i被清理的时间 | s | - |

---

### 3.3 中间变量（Intermediate Variables） - 计算辅助

#### 距离和时间
| 符号 | 含义 | 单位 | 计算方法 |
|------|------|------|----------|
| d(A,B) | A到B的距离 | m | 欧几里得或曼哈顿距离 |
| t_move(A,B) | A到B的移动时间 | s | d(A,B) / v_walk |
| t_check(i) | 检查房间i的时间 | s | α·A_i + β·Complexity_i |

#### 状态变量
| 符号 | 含义 | 类型 | 说明 |
|------|------|------|------|
| Cleared_i(t) | 房间i在时刻t是否已清理 | 布尔 | True/False |
| Pos_j(t) | 响应者j在时刻t的位置 | 坐标 | (x, y, floor) |
| Hazard_i(t) | 房间i在时刻t的危险度 | 实数 | 0-100 |

#### 优先级变量
| 符号 | 含义 | 类型 | 说明 |
|------|------|------|------|
| Priority_i | 房间i的优先级 | 实数 | 0-10，越大越优先 |
| Accessibility_i(t) | 房间i在时刻t是否可进入 | 布尔 | True/False |

---

### 3.4 性能指标（Performance Metrics） - 评估标准

#### 主要指标
| 符号 | 含义 | 单位 | 目标 |
|------|------|------|------|
| T_total | 总扫描时间 | s | Minimize |
| T_avg | 平均房间清理时间 | s | Minimize |
| T_max_wait | 最长等待时间 | s | Minimize |

#### 次要指标
| 符号 | 含义 | 单位 | 说明 |
|------|------|------|------|
| Redundancy | 冗余度 | % | 被检查≥2次的房间比例 |
| Load_balance | 负载均衡度 | - | std(T_1, ..., T_N) |
| Coverage | 覆盖率 | % | 100% 为完全覆盖 |
| Safety_score | 安全分数 | - | 综合评价 |

---

## 四、数据收集优先级

### 第一优先级（必需）⭐⭐⭐
**立即收集，否则无法建模**：
1. 房间数量和大致尺寸
2. 走廊长度
3. 楼层数
4. 出口位置
5. 基本的响应者移动速度
6. 基本的房间检查时间

### 第二优先级（重要）⭐⭐
**显著影响模型质量**：
1. 详细的房间面积
2. 房间连接关系（邻接矩阵）
3. 楼梯位置
4. 不同房间类型
5. 烟雾影响下的速度
6. 爬楼速度

### 第三优先级（优化）⭐
**用于模型精细化和扩展**：
1. 居住者数据
2. 火势蔓延模型参数
3. 通信延迟数据
4. 传感器数据

---

## 五、数据来源和收集方法

### 5.1 文献数据（可直接使用）
- **SFPE Handbook of Fire Protection Engineering**
  - 人员移动速度
  - 火灾蔓延模型
- **NFPA 标准**
  - 建筑规范
  - 疏散时间标准
- **学术论文**
  - 搜索关键词："building evacuation", "fire sweep", "emergency response optimization"

### 5.2 标准值（可合理假设）
- 标准办公室：4m × 4m = 16 m²
- 走廊宽度：2m（双向通行）
- 成人步行速度：1.5 m/s
- 房间检查时间：30秒（小房间）

### 5.3 实地调研（如果可行）
- 测量实际建筑
- 消防演练数据
- 访谈消防人员

### 5.4 仿真数据（生成）
- 使用随机生成创建测试场景
- 参数扫描探索敏感性

---

## 六、建议的建模流程

```
第1步：确定核心变量（1-2天）
  ├─ 定义基础几何参数
  ├─ 确定响应者能力参数
  └─ 明确优化目标

第2步：收集关键数据（1-2天）
  ├─ 文献查找标准值
  ├─ 设计基础场景
  └─ 准备测试数据集

第3步：建立基础模型（2-3天）
  ├─ 实现图结构
  ├─ 编写路径规划算法
  └─ 基础场景仿真

第4步：验证和校准（1天）
  ├─ 极端情况测试
  ├─ 敏感性分析
  └─ 调整参数

第5步：扩展模型（2-3天）
  ├─ 多层建筑
  ├─ 时变危险
  └─ 高级约束

第6步：撰写论文（2-3天）
  ├─ 整理结果
  ├─ 创建图表
  └─ 撰写报告
```

---

## 七、快速启动数据包

### 为了让您立即开始，我建议使用以下"标准数据集"：

#### 基础场景（题目给定）
```python
# 建筑参数
N_rooms = 6
N_floors = 1
corridor_length = 30  # m
corridor_width = 2  # m
room_size = 4 * 4  # m² (16 m²)
N_exits = 2

# 响应者参数
N_responders = 2
v_walk = 1.5  # m/s
check_time_per_sqm = 1.0  # s/m²
base_check_time = 10  # s

# 计算检查时间
def check_time(room_area):
    return base_check_time + check_time_per_sqm * room_area
```

#### 扩展场景1：三层办公楼
```python
N_rooms = 30  # 每层10个
N_floors = 3
N_responders = 4
v_stair_up = 0.4  # m/s
v_stair_down = 0.7  # m/s
```

#### 扩展场景2：幼儿园（单层，高优先级）
```python
N_rooms = 8
room_types = ['classroom', 'classroom', 'playroom', 'office', ...]
check_time_multiplier = 2.0  # 需要更仔细检查
priority_high_rooms = [0, 1, 2]  # 教室优先
```

---

## 总结

### ✅ 您现在需要做的：
1. **确认假设**：上述假设是否符合您的理解？
2. **选择数据源**：使用标准值还是需要实地数据？
3. **确定场景**：基础+哪两个扩展场景？

### ✅ 我接下来会做的：
1. 使用上述变量定义编写代码框架
2. 实现数据输入接口
3. 构建可视化工具
4. 准备论文模板

**准备好了吗？请告诉我：**
- 您对假设有什么调整？
- 您想重点关注哪些方面？
- 开始编写代码吧！

