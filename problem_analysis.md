# 2025 HiMCM Problem A: Emergency Evacuation Sweeps

## 问题背景

在火灾或煤气泄漏等紧急情况下，建筑物的快速有序疏散对于拯救生命至关重要。训练有素的应急响应人员需要在建筑物内进行"扫描"（sweep）——逐个区域、逐个房间检查，确保所有人员已安全撤离或正在向出口移动。

## 核心问题

设计一个数学模型来优化多层建筑物在紧急疏散期间的扫描策略，目标是在最短时间内确保所有房间都被清空，同时优先考虑居住者安全和响应者效率。

## 题目要求

### 1. 理解问题
识别影响模型的关键要素：
- 确定房间"全清"的标准
- 房间内的居住者或布局（如儿童日托 vs 办公空间 vs 仓库）
- 所需响应人员的数量和专业类型
- 扫描策略中的冗余度
- 紧急情况的类型

### 2. 创建基础扫描模型
**基础场景**：
- 2名消防员
- 单层办公楼
- 2个出口位于建筑物两侧
- 中央走廊两侧各有3个相似大小的房间

需要建模：响应者如何高效扫描，完成扫描需要多长时间

### 3. 应用模型
设计并分析至少2个额外的建筑布局：
- 改变楼层数量
- 改变每层平面图
- 改变房间居住者
- 确定：房间检查顺序、最优响应者数量及位置、最小扫描时间

### 4. 扩展模型
考虑更现实的约束：
- 通信延迟或失败
- 居住者对紧急情况的认知
- 时变危险（火势蔓延、能见度降低）
- 疏散期间人员动态移动
- 高风险区域优先级
- 次优响应者数量
- 非标准建筑布局
- 传感器或建筑自动化等技术的影响

### 5. 分享结果
撰写1-2页给地方应急规划委员会的信函，包括：
- 基于研究的疏散扫描策略
- 针对不同建筑类型和居住者的可行建议

---

## 详细建模思路

### 一、问题分析与建模框架

#### 1.1 问题本质
这是一个**路径优化问题**（Path Optimization）结合**任务调度问题**（Task Scheduling），可以归类为：
- **图论问题**：建筑物可表示为图结构
- **多代理路径规划**：多个响应者协同工作
- **时间约束优化**：最小化总扫描时间
- **覆盖问题**：确保所有房间都被检查

#### 1.2 关键变量识别

**空间变量**：
- 房间集合 R = {r₁, r₂, ..., rₙ}
- 走廊/连接通道集合 C
- 楼梯位置 S（多层建筑）
- 出口位置 E = {e₁, e₂, ..., eₘ}

**时间变量**：
- 房间检查时间 tcheck(ri)
- 移动时间 tmove(A, B)（从A到B）
- 总扫描时间 Ttotal（优化目标）

**响应者变量**：
- 响应者数量 N
- 响应者位置 P(t) = {p₁(t), p₂(t), ..., pₙ(t)}
- 响应者路径 Path(i) = 响应者i的扫描序列

**房间属性**：
- 房间面积 Area(ri)
- 居住者类型和数量 Occupants(ri)
- 危险等级 Hazard(ri, t)（可能时变）
- 优先级 Priority(ri)

---

### 二、核心数学模型

#### 2.1 图论建模方法

**建筑物图表示**：G = (V, E, W)
- V = R ∪ C ∪ E（节点：房间+走廊+出口）
- E = 边集合（连通关系）
- W = 边权重（移动时间或距离）

**状态空间表示**：
- 状态 State = (ClearedRooms, ResponderPositions, Time)
- 初始状态 S₀ = (∅, InitialPositions, 0)
- 目标状态 Sgoal = (AllRooms, AnyPosition, Tmin)

#### 2.2 优化目标函数

**主要目标**：
```
Minimize: Ttotal = max{Ti | i ∈ [1, N]}
```
其中 Ti 是响应者i完成其分配任务的时间

**约束条件**：
1. 完整性约束：∪(PathCovered(i)) = R（所有房间必须被检查）
2. 无冲突约束：避免多个响应者同时检查同一房间（除非需要冗余）
3. 连通性约束：路径必须在图G中可行
4. 安全约束：避免进入危险过高的区域

**次要目标**（多目标优化）：
- 最小化平均疏散时间
- 最大化冗余覆盖度
- 均衡响应者负载

---

### 三、建模方法选择

#### 方法1：整数规划（Integer Programming）

**决策变量**：
- xijk = 1 如果响应者i在时间步k检查房间j，否则为0
- yij = 1 如果响应者i检查房间j，否则为0

**模型**：
```
Minimize: T

Subject to:
∑i ∑k xijk ≥ 1, ∀j ∈ R           (每个房间至少被检查一次)
∑j xijk ≤ 1, ∀i, k                (每个响应者每次只在一个位置)
连通性约束                         (路径可行性)
T ≥ ∑j ∑k k·xijk, ∀i              (总时间定义)
```

#### 方法2：旅行商问题变体（TSP/VRP）

- **车辆路径问题**（VRP）：多个响应者类似多辆车
- **带时间窗的VRP**（VRPTW）：考虑时间约束
- **多旅行商问题**（mTSP）：多个起点和终点

**适用性**：适合单层建筑，路径优化问题

#### 方法3：动态规划与A*搜索

**A*算法扩展**：
- 状态：(已清理房间集合, 响应者位置)
- 启发式函数：h(s) = 未清理房间到最近响应者的最短距离

**优势**：可以找到最优解，适合中小规模问题

#### 方法4：仿真建模（Simulation-based）

**离散事件仿真**：
- 使用Python（SimPy）或MATLAB模拟
- 模拟响应者移动、房间检查过程
- 评估不同策略的效果

**优势**：
- 可以处理复杂的随机因素
- 容易实现时变危险
- 可视化效果好

#### 方法5：启发式算法

**贪心策略**：
- 最近优先（Nearest First）
- 优先级优先（Priority First）
- 负载均衡（Load Balancing）

**元启发式算法**：
- 遗传算法（GA）
- 模拟退火（SA）
- 粒子群优化（PSO）
- 蚁群算法（ACO）

---

### 四、基础场景建模方案

#### 4.1 场景参数

建筑物：
- 6个房间（每侧3个）
- 1条中央走廊
- 2个出口（两端）
- 响应者：2名消防员

#### 4.2 简化假设

1. 每个房间检查时间固定（如30秒）
2. 走廊移动速度恒定（如1米/秒）
3. 房间间距离相等
4. 无烟雾影响（初始模型）

#### 4.3 最优策略分析

**策略1：分区策略**
- 响应者1负责左侧3个房间
- 响应者2负责右侧3个房间
- 从各自最近的出口开始

**策略2：轮换策略**
- 两人从中央开始，交替检查两侧房间
- 减少重复路径

**时间计算**：
```
T_total = max(T1, T2)
T1 = t_move_to_first + ∑(t_check + t_move_between)
```

#### 4.4 建模步骤

1. **建立坐标系统**：定义房间和走廊的几何位置
2. **计算距离矩阵**：D[i][j] = 从位置i到位置j的距离
3. **定义检查时间**：基于房间面积和类型
4. **路径优化**：使用TSP求解器或启发式算法
5. **仿真验证**：模拟响应者移动过程

---

### 五、扩展场景建模

#### 5.1 多层建筑考虑

**新增因素**：
- 楼梯位置和数量
- 垂直移动时间（上楼/下楼）
- 楼层优先级（通常从上往下）

**模型调整**：
- 3D图结构：G = (V, E_horizontal ∪ E_vertical)
- 楼层间路径规划

#### 5.2 不同居住者类型

**居住者影响**：
| 类型 | 检查时间 | 优先级 | 特殊考虑 |
|------|----------|--------|----------|
| 儿童日托 | 长 | 高 | 需确认所有儿童 |
| 办公室 | 中 | 中 | 可能有躲藏者 |
| 仓库 | 长 | 低 | 面积大，可能有障碍 |
| 实验室 | 中 | 高 | 危险品 |

**建模方式**：
```
t_check(r) = α · Area(r) + β · Occupants(r) + γ · Complexity(r)
Priority(r) = f(OccupantType, HazardLevel, Accessibility)
```

#### 5.3 时变危险建模

**火势蔓延模型**：
```
Hazard(r, t) = H₀(r) + k · t
如果 Hazard(r, t) > Threshold，房间不可进入
```

**能见度降低**：
```
Visibility(t) = V₀ · e^(-λt)
影响移动速度：v(t) = v₀ · Visibility(t)
```

#### 5.4 动态人群疏散

**双向流动模型**：
- 响应者向内移动
- 居住者向外疏散
- 可能产生拥堵

**社会力模型**（Social Force Model）：
模拟人群动态行为

---

### 六、算法实现建议

#### 6.1 基础算法（Python伪代码）

```python
# 图结构定义
class Building:
    def __init__(self):
        self.rooms = []
        self.corridors = []
        self.exits = []
        self.graph = {}  # 邻接表
    
    def calculate_distance(self, pos1, pos2):
        # 计算两点间距离
        return distance
    
    def get_neighbors(self, node):
        # 获取相邻节点
        return self.graph[node]

# 响应者类
class Responder:
    def __init__(self, id, start_position):
        self.id = id
        self.position = start_position
        self.path = []
        self.time = 0
    
    def move_to(self, target, building):
        # 移动到目标位置
        distance = building.calculate_distance(self.position, target)
        self.time += distance / self.speed
        self.position = target
    
    def check_room(self, room):
        # 检查房间
        self.time += room.check_time
        room.cleared = True

# 分配算法
def assign_rooms(building, responders):
    # 方法1：贪心分配
    # 方法2：遗传算法优化
    # 方法3：整数规划求解
    pass

# 路径规划
def plan_path(responder, assigned_rooms, building):
    # 使用TSP求解器或A*算法
    # 返回最优访问顺序
    pass

# 主仿真循环
def simulate_sweep(building, responders):
    while not all_rooms_cleared(building):
        for responder in responders:
            # 执行下一步动作
            next_room = get_next_room(responder)
            responder.move_to(next_room, building)
            responder.check_room(next_room)
    
    return max(r.time for r in responders)
```

#### 6.2 优化算法

**遗传算法实现**：
```python
# 染色体编码：响应者的房间访问序列
chromosome = [[r1, r3, r5], [r2, r4, r6]]  # 2个响应者

# 适应度函数
def fitness(chromosome):
    total_time = simulate_with_assignment(chromosome)
    return -total_time  # 最小化时间

# 交叉操作
def crossover(parent1, parent2):
    # 保证每个房间只被访问一次
    pass

# 变异操作
def mutation(chromosome):
    # 随机交换房间顺序或重新分配
    pass
```

---

### 七、模型验证与敏感性分析

#### 7.1 验证方法

1. **极端情况测试**：
   - 单个房间 → 理论最优解
   - 线性布局 → 与理论计算对比

2. **对比基准**：
   - 简单贪心策略
   - 随机策略
   - 人工设计策略

3. **仿真重复**：
   - 多次运行评估稳定性
   - 考虑随机因素

#### 7.2 敏感性分析

测试参数变化的影响：
- 响应者数量：N = 1, 2, 3, 4, ...
- 房间检查时间：±20%变化
- 移动速度：不同楼层、烟雾影响
- 楼层数量：1-10层

**分析方法**：
- 单因素分析
- 多因素DOE（Design of Experiments）

---

### 八、技术集成建议

#### 8.1 建议的技术

1. **物联网传感器**：
   - 房间占用传感器
   - 烟雾/热量探测器
   - 实时位置追踪

2. **建筑管理系统**：
   - 自动锁门系统
   - 照明引导系统
   - 通信系统

3. **数据分析**：
   - 历史数据分析
   - 预测性模型
   - 实时决策支持

#### 8.2 技术对模型的影响

**信息完善**：
- 已知哪些房间已清空
- 实时人员位置
- 危险区域标识

**模型调整**：
```
if sensor_data_available:
    # 跳过已确认空的房间
    rooms_to_check = [r for r in all_rooms if not sensor_cleared(r)]
    # 动态重新规划路径
    replan_paths(responders, rooms_to_check)
```

---

### 九、实施建议

#### 9.1 不同建筑类型策略

**办公楼**：
- 标准网格布局，易于系统化扫描
- 建议：分区域分配，从上到下

**学校/日托中心**：
- 高优先级，需要更仔细检查
- 建议：增加响应者，多重验证

**医院**：
- 特殊需求人群，不能快速疏散
- 建议：原地保护+重点区域优先

**商场/综合体**：
- 复杂布局，多出口
- 建议：多团队协同，区域责任制

#### 9.2 冗余策略

1. **空间冗余**：
   - 关键区域由2名响应者检查
   - 高风险房间多次确认

2. **时间冗余**：
   - 快速首轮扫描+详细二次检查
   - 标记清理时间，超时重新检查

3. **通信冗余**：
   - 无线电+手势信号
   - 物理标记（门上做记号）

---

### 十、论文撰写建议

#### 论文结构

1. **摘要**（Summary Sheet）
   - 问题重述
   - 主要方法
   - 关键结果
   - 创新点

2. **问题分析**
   - 关键因素识别
   - 假设说明
   - 变量定义

3. **模型建立**
   - 数学模型描述
   - 算法设计
   - 参数确定

4. **模型求解**
   - 基础场景结果
   - 扩展场景分析
   - 可视化展示

5. **模型验证**
   - 合理性检验
   - 敏感性分析
   - 对比验证

6. **模型应用**
   - 实际案例
   - 技术集成
   - 实施建议

7. **致地方应急委员会的信函**
   - 执行摘要
   - 实用建议
   - 易于实施的策略

#### 可视化建议

- 建筑平面图with响应者路径
- 时间-空间图（甘特图）
- 热力图（优先级分布）
- 对比柱状图（不同策略效果）
- 敏感性分析曲线

---

## 总结

这是一个综合性的优化问题，建议采用**分层建模**方法：

1. **基础层**：图论+路径优化
2. **策略层**：启发式算法+仿真
3. **扩展层**：动态约束+多目标优化

**核心创新点**可以包括：
- 考虑时变危险的动态路径规划
- 多目标优化（时间+安全+冗余）
- 技术集成的智能疏散系统
- 针对不同建筑类型的自适应策略

祝您建模顺利！

